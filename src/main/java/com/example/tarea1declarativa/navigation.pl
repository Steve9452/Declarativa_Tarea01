


coordenada(1,-89.224267304412422, 13.703150717800634 ).
coordenada(2,-89.227109209527967, 13.703067050713086 ).
coordenada(3,-89.228896165017289, 13.702962466811764 ).
coordenada(4,-89.230747709259219, 13.702774215672081 ).
coordenada(5,-89.232706901422205, 13.702753298869473 ).
coordenada(6,-89.232728431006436, 13.703652719700306 ).
coordenada(7,-89.230618531753976, 13.703736386579315 ).
coordenada(8,-89.22885310584887, 13.703945553646497 ).
coordenada(9,-89.230446295080313, 13.705828048871826 ).
coordenada(10,-89.232491605580137, 13.706037214076886 ).
coordenada(11,-89.232427016827501, 13.707940608884595 ).
coordenada(12,-89.235462688200926, 13.708170688530808 ).
coordenada(13,-89.235634924874589, 13.706371878017634 ).
coordenada(14,-89.236000927806131, 13.702355879266182 ).
coordenada(15,-89.235828691132468, 13.703924636948157 ).
coordenada(16,-89.240565199658363, 13.708798177329566 ).
coordenada(17,-89.2408881434215, 13.705033219394245 ).
coordenada(18,-89.241017320926744, 13.702774215672081 ).
coordenada(19,-89.240328374232078, 13.710785214132702 ).
coordenada(20,-89.241943093047723, 13.708986423642306 ).
coordenada(21,-89.242222977642442, 13.706622875660329 ).
coordenada(22,-89.241900033879304, 13.70287879965719 ).
coordenada(23,-89.237529528284952, 13.710471472597236 ).
coordenada(24,-89.231996425143336, 13.710576053155627 ).
coordenada(25,-89.22680779534906, 13.707585030806259 ).
coordenada(26,-89.239015069595354, 13.714152680218579 ).
coordenada(27,-89.243817462245403, 13.710228256684607 ).
coordenada(28,-89.237789037883076, 13.708531222243993 ).
coordenada(29,-89.240845969546001, 13.706073255930214 ).
coordenada(30,-89.23893621026906, 13.704883980540865 ).
coordenada(31,-89.241691047035829, 13.710664495152757 ).
coordenada(32,-89.239495298448887, 13.710706459360988 ).
coordenada(33,-89.238861770987711, 13.710636519009769 ).
coordenada(34,-89.242950902782482, 13.709055861517729 ).
coordenada(35,-89.243951588204084, 13.709454523923759 ).
coordenada(36,-89.242182899835072, 13.705172071636358 ).
coordenada(37,-89.243514269039665, 13.703075907260443 ).


coordenada(38, -89.224365761566233, 13.70184556236074).
coordenada(39, -89.227272719505649, 13.701639414076908).
coordenada(40, -89.229055087877256, 13.701824947540496).
coordenada(41, -89.230816237577784, 13.70192802162364).
coordenada(42, -89.234699254387365, 13.702175399238731).
coordenada(43, -89.227049139141513, 13.704051355693124).
coordenada(44, -89.234567357105135, 13.70302610246727).
coordenada(45, -89.235902508641516, 13.703140894350506).
coordenada(46, -89.234520095103861, 13.70377798828317).
coordenada(47, -89.234425571101283, 13.704558569485499).
coordenada(48, -89.232656165295964, 13.704323803694539).
coordenada(49, -89.235712898156507, 13.70547267954106).
coordenada(50, -89.235769187855553, 13.704692206643857).
coordenada(51, -89.234312837304245, 13.705324020144435).
coordenada(52, -89.234261474227793, 13.70625549655934).
coordenada(53, -89.235520050554186, 13.707278475574922).
coordenada(54, -89.23419211351694, 13.707141229141557).
coordenada(55, -89.232421530800607, 13.706994832857584).
coordenada(56, -89.232610971932658, 13.705183156658334).
coordenada(57, -89.230605859783253, 13.704396989331084).
coordenada(58, -89.230527087520244, 13.70501618328673).
coordenada(59, -89.236537614177763, 13.707352277857714).
coordenada(60, -89.237846441315, 13.707483172680966).
coordenada(61, -89.23647987180405, 13.708333987254196).
coordenada(62, -89.234057538662441, 13.708073532618103).
coordenada(63, -89.235292367418026, 13.709389668560666).
coordenada(64, -89.23634126864151, 13.709499408971189).
coordenada(65, -89.237616087051592, 13.709671858084125).
coordenada(66, -89.23532464130183, 13.710032433092914).
coordenada(67, -89.236276720873917, 13.710361653269644).

% Federacion salvadorena de futbol
coordenada(68, -89.238708492188607, 13.704264726677682  ).

% Tipicos Margoth
coordenada(69, -89.234176537240529, 13.704504383133832 ).

% Veterinaria ServiVet
coordenada(70, -89.230732945652363, 13.703138699352586 ).

% ShoppingCenter
coordenada(71, -89.23286504699567, 13.706101283730865 ).

% Embajada de alemania
coordenada(72, -89.234305135213845, 13.705933772114685 ).

% Escuela Cristiana Maranatha
coordenada(73, -89.233452811780552, 13.706153459588066 ).

% El Zocalo
coordenada(74, -89.228979563285449, 13.702117373611753 ).

% UTEC
coordenada(75, -89.2265820412469, 13.704136833530622 ).

% Centro de cirujia Ambulatoria
coordenada(76, -89.230950923607296, 13.703736886082549 ).

% Colegio Sagrado Corazon
coordenada(77, -89.237747768128898, 13.708967130984734 ).

% Banco Agricola
coordenada(78, -89.241177355277188, 13.708827715628072 ).

% Embajada de Honduras
coordenada(79, -89.242090558955667, 13.707526501642134 ).

% Movistar Central
coordenada(80, -89.240217766649906, 13.70873899672165 ).

% Asociacion Salvadorena de Ingenieros
coordenada(81, -89.232326527243771, 13.707485662558373 ).

% Mosaico El Santo Papa
coordenada(82, -89.233589067567536, 13.70805740908485 ).

% Oficinas Administrativas Fosalud
coordenada(83, -89.23209460249997, 13.706918139383706 ).

% Pasteleria Bom Bom
coordenada(84, -89.231127766224432, 13.705980244481939 ).

% Iglesia Manantial
coordenada(85, -89.231881521641611, 13.704287517779907 ).

% DINAC
coordenada(86, -89.230614632728873, 13.704010089694696 ).

% Academia Cristiana Internacional
coordenada(87, -89.229692731872476, 13.70385940526748 ).

% Pasteleria Sweet
coordenada(88, -89.227989534535524, 13.703974883061468 ).

% Galaxy Bowling
coordenada(89, -89.232830963561341, 13.703321446991358 ).

% Unidad de Pensiones ISS
coordenada(90, -89.234842910713411, 13.703822790345336 ).

% Gamero Ortodoncia
coordenada(91, -89.235808297459272, 13.703725619947379 ).

% Super Selectos El Paseo
coordenada(92, -89.235415474924551, 13.702244118468538 ).


% Definicion de segmentos

  

segmento(1,2).

segmento(2,3).
segmento(2,39).


segmento(3,2).
segmento(3,8).
segmento(3,4).


segmento(4,3).
segmento(4,5).
segmento(4,41).


segmento(5,6).
segmento(5,42).
segmento(5,41).


segmento(6,48).
segmento(6,46).
segmento(6,7).

segmento(7,4).
segmento(7,6).
segmento(7,8).


segmento(8,9).
segmento(8,7).
segmento(8,43).

segmento(9,58).
segmento(9,10).

segmento(10,52).
segmento(10,55).
segmento(10,9).


segmento(11,24).
segmento(11,62).
segmento(11,25). % *****

segmento(12,61).
segmento(12,53).
segmento(12,63).

segmento(13,49).
segmento(13,59).

segmento(14,18).
segmento(14,42). % *****

segmento(15,46).
segmento(15,45).

% 20,19,29, 28
segmento(16,20).
segmento(16,19).

% 18, 29 , 30
segmento(17,30).
segmento(17,29).
segmento(17,36).

% 22, 14, 17
segmento(18,22).
segmento(18,14).
segmento(18,17).

% 31, 32, 16
segmento(19,31).
segmento(19,32).

% 34, 21, 16, 31
segmento(20,34).
segmento(20,21).
segmento(20,16).

% 36
segmento(21,36).

% 22, 18
% segmento(22,37).
segmento(22,18).

% 33, 65, 67,
segmento(23,65).
segmento(23,67).
segmento(23,33).

% 11, 26
segmento(24,11).
segmento(24,26).

% 24
segmento(25,24).

% 24
segmento(26,24).

% 35
segmento(27,35).

% 16,60, 65
segmento(28,16).
segmento(28,60).
segmento(28,65).

% 16
segmento(29,16).

% 17
segmento(30,17).

% 20
segmento(31,20).

% 19, 33
segmento(32,19).
segmento(32,33).

% 23, 32
segmento(33,23).
segmento(33,32).

% 35, 20
segmento(34,35).
segmento(34,20).

% 27, 34
segmento(35,27).
segmento(35,34).

% 22
segmento(36,22).
segmento(36,37).

% 1, 39
segmento(38,1).
segmento(38,39).

% 40
segmento(39,40).

% 39, 3, 41, 5
segmento(40,39).
segmento(40,3).
segmento(40,41).

% 5, 40
segmento(41,5).
segmento(41,40).

% 14, 5
segmento(42,14).
segmento(42,5).

% 2, 8
segmento(43,2).
segmento(43,8).

% 45, 42, 46
segmento(44,45).
segmento(44,42).
segmento(44,47).

% 14, 44
segmento(45,14).
segmento(45,44).

% 15, 6, 44, 47
segmento(46,15).
segmento(46,6).
segmento(46,44).
segmento(46,47).

% 48, 46 , 51
segmento(47,48).
segmento(47,46).
segmento(47,51).

% 56, 57,
segmento(48,56).
segmento(48,57).

% 50, 51,
segmento(49,50).
segmento(49,51).

% 15, 47
segmento(50,15).
segmento(50,47).

% 49, 56, 52, 47
segmento(51,49).
segmento(51,56).
segmento(51,52).
segmento(51,47).

% 13, 51, 54
segmento(52,13).
segmento(52,51).
segmento(52,54).

% 13, 54,
segmento(53,13).
segmento(53,54).

% 55, 52, 62
segmento(54,55).
segmento(54,52).
segmento(54,62).

% 11, 9
segmento(55,11).
segmento(55,9).

% 10, 51
segmento(56,10).
segmento(56,51).

% 7
segmento(57,7).

% 57
segmento(58,57).

% 53, 61,
segmento(59,53).
segmento(59,61).

% 59, 28
segmento(60,59).
segmento(60,28).

% 28, 64
segmento(61,28).
segmento(61,64).

% 12, 63
segmento(62,12).
segmento(62,63).

% 12, 66, 64 , 62
segmento(63,12).
segmento(63,66).
segmento(63,64).
segmento(63,62).

% 61, 65, 67, 63
segmento(64,61).
segmento(64,65).
segmento(64,67).
segmento(64,63).

% 28, 23, 64
segmento(65,28).
segmento(65,23).
segmento(65,64).

% 67, 63
segmento(66,67).
segmento(66,63).

% 64, 66, 23
segmento(67,64).
segmento(67,66).
segmento(67,23).


% lugar(idCoordenada, nombre, llegaPor, SalePor).
lugar(68, 'Federacion Salvadorena de futbol', 30, 30).

lugar(69, 'Tipicos Margoth', 47 , 48).

lugar(70, 'Veterinaria ServiVet', 7, 4).

lugar(71, 'ShoppingCenter', 10, 52).

lugar(72, 'Embajada de alemania', 51, 51).

lugar(73, 'Escuela Cristiana Maranatha', 10, 52).

lugar(74, 'El Zocalo', 40, 3).

lugar(75, 'UTEC', 43, 43).

lugar(76, 'Centro de cirujia Ambulatoria', 6,7).

lugar(77, 'Colegio Sagrado Corazon', 28, 65).

lugar(78, 'Banco Agricola', 20,16).

lugar(79, 'Embajada de Honduras', 20,21).

lugar(80, 'Movistar Central', 28,16).

lugar(81, 'Asociacion Salvadorena de Ingenieros', 55, 11).

lugar(82, 'Mosaico El Santo Papa', 11, 62).

lugar(83, 'Oficinas Administrativas Fosalud', 55, 9 ).

lugar(84, 'Pasteleria Bom Bom', 9, 10).

lugar(85, 'Iglesia Manantial', 48, 57).

lugar(86, 'DINAC', 57, 7).

lugar(87, 'Academia Cristiana Internacional', 7, 7).

lugar(88, 'Pasteleria Sweet', 8, 43).

lugar(89, 'Galaxy Bowling', 5, 6).

lugar(90, 'Unidad de Pensiones ISS', 46, 15).

lugar(91, 'Gamero Ortodoncia', 15, 45).

lugar(92, 'Super Selectos El Paseo', 14, 42).








% return coordenada de un lugar
coordenada_lugar(Id, Lat, Lng, LlegaPor, SalePor) :-
    lugar(Id, _, LlegaPor, SalePor),
    coordenada(Id, Lat, Lng).


rutaDesdeLugar(IdLugar, IdDestino, Ruta) :-
    coordenada_lugar(IdLugar, _, _, _, SalePor),
    coordenada_lugar(IdDestino, _, _, LlegaPor, _),
    ruta_minima2(SalePor, LlegaPor, RutaAux),
    append([IdLugar], RutaAux, RutaAux2),
    append(RutaAux2, [IdDestino], Ruta).
    


% example: route(1,2,Route).
%  ?-[1,2]
% Regla para encontrar una ruta entre dos puntos
route(X, Y, Ruta) :-
    dfs(X, Y, [X], RutaInversa),  % Llama a la búsqueda en profundidad (DFS)
    reverse(RutaInversa, Ruta).   % Invierte la ruta encontrada

% Regla para la búsqueda en profundidad (DFS)
dfs(X, X, _, [X]).
dfs(X, Y, Visitados, [X | Ruta]) :-
    segmento(X, Z),                 % Encuentra un punto Z conectado a X
    \+ member(Z, Visitados),        % Asegura que Z no haya sido visitado previamente
    dfs(Z, Y, [Z | Visitados], Ruta).

% Predicado para comprobar si un elemento está en una lista
member(X, [X | _]).
member(X, [_ | Resto]) :-
    member(X, Resto).








ruta_minima(Inicio, Destino, Ruta) :-
    ruta_minima(Inicio, Destino, [Inicio], RutaInvertida),
    reverse(RutaInvertida, Ruta).
    
ruta_minima(Destino, Destino, Ruta, Ruta).
ruta_minima(Inicio, Destino, Visitados, Ruta) :-
    segmento(Inicio, Intermedio),
    not(member(Intermedio, Visitados)),
    ruta_minima(Intermedio, Destino, [Intermedio|Visitados], Ruta).



% Predicado para encontrar una ruta con la menor cantidad de saltos
ruta_minima2(Inicio, Destino, Ruta) :-
    bfs([(Inicio, [])], Destino, Ruta).

% Predicado de búsqueda en anchura (BFS)
bfs([(Destino, RutaParcial) | _], Destino, Ruta) :-
    reverse(RutaParcial, Ruta).
bfs([(Nodo, RutaParcial) | Cola], Destino, Ruta) :-
    findall((ProximoNodo, [ProximoNodo | RutaParcial]),
            (segmento(Nodo, ProximoNodo), not(member(ProximoNodo, [Nodo | RutaParcial]))),
            NodosHijos),
    append(Cola, NodosHijos, ColaNueva),
    bfs(ColaNueva, Destino, Ruta).





